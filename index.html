<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<link rel="icon" type="image/jpeg" href="img1.jpg">

<title>Happy Birthday ‚ù§Ô∏è</title>
<style>
  :root{--bg:#0f1724;--card:#0b1220;--accent:#ff6b81}
  *{box-sizing:border-box;font-family:system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial}
  body{margin:0;background:linear-gradient(180deg,var(--bg),#071123);color:#e6eef8;min-height:100vh;display:flex;align-items:center;justify-content:center;padding:24px}
  .card{width:920px;max-width:96vw;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:18px;padding:28px;box-shadow:0 12px 40px rgba(2,6,23,0.6);position:relative;overflow:hidden}
  header{display:flex;gap:16px;align-items:center;}
  .avatar{width:166px;height:66px;border-radius:14px;object-fit:cover;border:3px solid rgba(255,255,255,0.06)}
 
  h1{margin:0;font-size:28px}
  p.lead{margin:6px 0 0;color:#cfe7ffcc}
  .row{display:flex;gap:20px;margin-top:18px}
  .col{flex:1;min-width:0}
  .big-msg{background:rgba(255,255,255,0.02);padding:18px;border-radius:12px;min-height:120px;display:flex;align-items:center;justify-content:center;font-size:20px;text-align:center}
  .actions{display:flex; justify-content: center; gap:12px;margin-top:12px}
  button{background:var(--accent);border:none;padding:10px 14px;border-radius:10px;color:white;font-weight:600;cursor:pointer}
  .muted{background:transparent;border:1px solid rgba(255,255,255,0.04);color:#bcd7ff}
  /* small gallery */
  .gallery{display:flex; justify-content: center; gap:10px;margin-top:12px}
  .gallery img{width:100px;height:70px;object-fit:cover;
    object-position: center 30%;
    border-radius:8px;cursor:pointer;border:2px solid transparent}
  .gallery img:hover{border-color:rgba(255,255,255,0.08)}
  .hidden-note{display:none;margin-top:12px;padding:12px;border-radius:10px;background:linear-gradient(90deg, rgba(255,107,129,0.06), rgba(255,191,145,0.03))}
  footer{margin-top:16px;font-size:13px;color:#9fb8f7cc}
  /* confetti canvas */
  canvas#confetti{position:absolute;left:0;top:0;width:100%;height:100%;pointer-events:none;mix-blend-mode:screen}
  /* responsive */
  @media (max-width:720px){ .row{flex-direction:column} .gallery img{width:70px;height:50px} }
</style>
</head>
<body>
  <div class="card" id="card">
    <canvas id="confetti"></canvas>
    <header>
      <img class="avatar" id="avatar" src="raiha.jpg" alt="Her photo">
      <div>
        <h1>Happy Birthday, <span id="name">Raiha‚ù§Ô∏è</span> üéâ</h1>
        <p class="lead">Aaj ka din specially Apke liye ‚Äî kuch surprises niche hain. Click karo aur enjoy karo! ‚ù§Ô∏è</p>
      </div>
    </header>

    <div class="row">
      <div class="col">
        <div class="big-msg" id="mainMessage">
          <div>
            <div style="font-size:20px;font-weight:700">Surprise #1</div>
            <div style="margin-top:8px;color:#cfe7ffdd">Click kero buttons to open your surprise</div>
            <div class="actions">
              <button id="openNote">Open My Wish</button>
              <button id="playSong" class="muted">üé∂ Play Music</button>
            </div>
          </div>
        </div>

        <div class="gallery" id="gallery">
          <img src="img1.jpg" alt="1">
          <img src="img2.jpg" alt="2">
          <img src="img3.jpg" alt="3">
        </div>

        <div class="hidden-note" id="note">
          <h3 style="margin:0 0 8px 0">My Love</h3>
          <p style="margin:0 0 8px 0;color:#dbeeff">Happy Birthday! Ap meri sab se achi Dost aur Life partner ho. Aaj se har saal main apko aur zyada khush karunga. ‚Äî <strong>AbdulRehman</strong></p>
          <small style="color:#bcd7ff99"> Janu I love You soo much or bta dena gift kiya chahiye üòâ</small>
        </div>
      </div>

      <div class="col">
        <div style="background:rgba(255,255,255,0.02);padding:14px;border-radius:12px">
          <div style="font-weight:700">Song for you</div>
          <div style="margin-top:8px">Apke liye me ne love mashup choose ki he! Kindly zeroor sunna meri fariyad okaüòò</div>
          <div style="margin-top:10px">
            <button id="openYT" class="muted">Open Playlist / Song</button>
          </div>

          <hr style="opacity:.06;margin:12px 0">

          <div style="font-weight:700">Countdown to next surprise</div>
          <div id="countdown" style="font-size:20px;margin-top:8px">00d 00:00:00</div>

          <hr style="opacity:.06;margin:12px 0">

          <div style="font-weight:700">Gifts</div>
          <ul id="coupons" style="margin:8px 0 0 16px;padding:0">
            <li>üíç Ring ‚Äî <button class="muted small" data-c="movie">Redeem</button></li>
            <li>üçΩÔ∏è Dinner in Khayyam ‚Äî <button class="muted small" data-c="breakfast">Redeem</button></li>
          </ul>
        </div>
      </div>
    </div>

    <footer>Made with ‚ù§Ô∏è ‚Äî Click images to open full view.</footer>
  </div>

  <!-- ====== Background audio element (test link) ====== -->
  <audio id="bg-music" loop preload="auto">
    <!-- Test mp3 (public) ‚Äî replace this with your own direct mp3 URL or local filename -->
    <source src="song.mp3" type="audio/mpeg">
    Your browser does not support the audio element.
  </audio>

<script>
/* Simple confetti (small) */
(function(){
  const canvas = document.getElementById('confetti');
  const ctx = canvas.getContext('2d');
  let W, H, pieces=[];
  function resize(){ W = canvas.width = canvas.offsetWidth; H = canvas.height = canvas.offsetHeight; }
  window.addEventListener('resize', resize); resize();
  function rand(min,max){ return Math.random()*(max-min)+min }
  function makePieces(n=60){
    pieces = [];
    for(let i=0;i<n;i++){
      pieces.push({x:rand(0,W), y:rand(-H,0), r:rand(6,12), d:rand(1,4), color: ['#ff6b81','#ffd166','#6ee7b7','#a5b4fc'][i%4], tilt: rand(-0.2,0.2) })
    }
  }
  function draw(){
    ctx.clearRect(0,0,W,H);
    pieces.forEach(p=>{
      ctx.beginPath();
      ctx.fillStyle = p.color;
      ctx.rect(p.x, p.y, p.r*1.1, p.r*0.6);
      ctx.fill();
      p.x += Math.sin(p.d) + p.tilt*5;
      p.y += 2 + p.d*0.6;
      p.tilt += 0.01;
      if(p.y>H+20){ p.y = -10; p.x = rand(0,W); }
    })
    requestAnimationFrame(draw);
  }
  makePieces(90);
  draw();
})();

/* Interactions */
document.getElementById('openNote').addEventListener('click', ()=>{
  const n = document.getElementById('note');
  n.style.display = n.style.display === 'block' ? 'none' : 'block';
  const m = document.getElementById('mainMessage');
  m.animate([{transform:'scale(1)'},{transform:'scale(1.02)'}],{duration:200,fill:'forwards'}).onfinish=()=>m.style.transform='scale(1)';
});

document.getElementById('openYT').addEventListener('click', ()=>{
  // change to your favourite youtube/spotify song url:
  window.open('https://youtu.be/s5m3KAY1Zdo?si=kdDTJg4a0weuqLV-','_blank');
});

/* ===== New background music toggle behavior ===== */
(function(){
  const music = document.getElementById('bg-music');
  const playBtn = document.getElementById('playSong');

  // Initialize button text based on whether music is paused
  function updateButton(){
    if(music.paused) playBtn.textContent = "üé∂ Play Music";
    else playBtn.textContent = "‚è∏ Pause Music";
  }
  updateButton();

  // Toggle play/pause when clicking Play Music button
  playBtn.addEventListener('click', async (e) => {
    try {
      if (music.paused) {
        await music.play(); // user clicked so browsers should allow playback
      } else {
        music.pause();
      }
    } catch (err) {
      console.warn('Playback failed:', err);
      alert('Playback blocked by browser ‚Äî try clicking anywhere on the page once and then press Play again.');
    }
    updateButton();
  });

  // Keep button text in sync if playback ends/pauses elsewhere
  music.addEventListener('pause', updateButton);
  music.addEventListener('play', updateButton);
})();

/* Simple countdown */
(function(){
  const target = new Date(Date.now() + 24*60*60*1000);
  function update(){
    const now = new Date();
    let diff = target - now;
    if(diff<0) return document.getElementById('countdown').textContent = "It's surprise time!";
    const d = Math.floor(diff / (1000*60*60*24));
    diff -= d*(1000*60*60*24);
    const hh = String(Math.floor(diff/(1000*60*60))).padStart(2,'0');
    diff -= hh*60*60*1000;
    const mm = String(Math.floor(diff/(1000*60))).padStart(2,'0');
    diff -= mm*60*1000;
    const ss = String(Math.floor(diff/1000)).padStart(2,'0');
    document.getElementById('countdown').textContent = `${d}d ${hh}:${mm}:${ss}`;
  }
  update(); setInterval(update,1000);
})();

/* Coupons */
document.querySelectorAll('#coupons button').forEach(btn=>{
  const key = 'coupon_'+btn.dataset.c;
  if(localStorage.getItem(key)) btn.textContent = 'Redeemed ‚úì';
  btn.addEventListener('click', ()=>{
    localStorage.setItem(key, '1');
    btn.textContent = 'Redeemed ‚úì';
    alert("Next meetup per InShaAllah‚ù§Ô∏è");
  })
});

/* Gallery click to open in new tab */
document.querySelectorAll('#gallery img').forEach(img=>{
  img.addEventListener('click',()=> window.open(img.src,'_blank'));
});

/* Customize name from query param ?name=... */
(function(){
  const params = new URLSearchParams(location.search);
  const nm = params.get('name');
  if(nm) document.getElementById('name').textContent = decodeURIComponent(nm);
})();
</script>
</body>
</html>
